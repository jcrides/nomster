<div class="nom-box col-xs-10 col-xs-offset-1">
  <h2><%= @place.name %></h2>
  <i><%= @place.address %></i>
  <br>
  <p><%= @place.description %></p>
  <% if @place.user.present? %>
    <small><%= @place.user.email %></small>
  <% end %>

  <% if @place.latitude.present? && @place.longitude.present? %>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true"></script>
    <script>
      function initialize() {
        var myLatlng = new google.maps.LatLng(<%= @place.latitude %>, <%= @place.longitude %>);
        var mapOptions = {
          zoom: 15,
          center: myLatlng
        }
        var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

        var marker = new google.maps.Marker({
          position: myLatlng,
          map: map,
          title: 'Hello World!'
        });
      }

      google.maps.event.addDomListener(window, 'load', initialize);

    </script>

    <br>
    <div id="map-canvas"></div>
  <% end %>
  <br>

  <div class="pull-right">
    <% if current_user && current_user == @place.user %>
      <%= link_to 'Edit', edit_place_path(@place), :class => 'btn nom-button' %>
      <%= link_to 'Delete', place_path(@place), :method => :delete, :data => {:confirm => 'Do you really want to delete this place?'}, :class => 'btn btn-warning' %>
    <% end %>
  </div>
</div>

<div class="clear"></div>
<%= simple_form_for @comment, :url => place_comments_path(@place) do |f| %>
  <%= f.input :message %>
  <%= f.input :rating %>
  <%= f.submit "Add a comment", :class => 'btn nom-button' %>
<% end %>

<h2>Comments</h2>
<% @place.comments.each do |comment| %>
  <div>
    <blockquote>
      <b><%= comment.rating %></b> -
         <%= comment.message %>
      <small><%= comment.user.email %></small>
    </blockquote>
  </div>
<% end %>
